#!/bin/bash

## #ddev-generated
# Fail on errors
set -euo pipefail

# The files to check are passed as arguments to this script
FILES_TO_CHECK="$@"

if [ -z "$FILES_TO_CHECK" ]; then
  echo "‚ùå No files provided to check"
  exit 1
fi

echo "üîç Running PHPStan on files:"
echo "$FILES_TO_CHECK" | tr ' ' '\n'

# Ensure PHPStan and its Drupal extension are installed
composer require --dev phpstan/phpstan phpstan/extension-installer mglaman/phpstan-drupal

# Run PHPStan with specified level
phpstan analyse $FILES_TO_CHECK